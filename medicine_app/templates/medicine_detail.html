{% extends "base.html" %}
{% block content %}

<div class="container mt-4">
  
  <div class="card shadow-sm mb-4">
    <div class="card-header bg-danger text-white fw-bold">
      <i class="fa-solid fa-capsules me-2"></i> Medicine Information
    </div>
    <div class="card-body">
      <h3 class="card-title text-danger">{{ medicine.name }}</h3>
      <p class="mb-1"><strong>Generic Name:</strong> {{ medicine.generic_name }}</p>
      <p class="mb-1"><strong>Form:</strong> {{ medicine.form }}</p>
      <p class="mb-1"><strong>Strength:</strong> {{ medicine.strength }}</p>
      <p class="mb-1"><strong>Description:</strong> {{ medicine.description }}</p>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-header bg-danger text-white fw-bold">
      <i class="fa-solid fa-store me-2"></i>Available in Pharmacies
    </div>
    <div class="card-body p-0">
      <table class="table table-striped table-hover mb-0">
        <thead class="table-danger">
          <tr>
            <th>Pharmacy</th>
            <th>City</th>
            <th>Address</th>
            <th>Phone</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Status</th>
            <th>Contact</th>
          </tr>
        </thead>
        <tbody>
          {% for i in inventories %}
          <tr>
            <td>{{ i.pharmacy.name }}</td>
            <td>{{ i.pharmacy.city }}</td>
            <td>{{ i.pharmacy.address }}</td>
            <td>{{ i.pharmacy.phone }}</td>
            <td class="fw-bold text-danger">${{ i.price }}</td>
            <td>{{ i.quantity }}</td>
            <td>
              {% if i.status == "IN" %}
                <span class="badge bg-success">In Stock</span>
              {% else %}
                <span class="badge bg-danger">Out of Stock</span>
              {% endif %}
            </td>
            <td>
                <a href="tel:{{ i.pharmacy.phone }}" 
                   class="btn btn-sm btn-outline-primary me-1">
                  <i class="fa-solid fa-phone"></i>
                </a>
                <a href="https://wa.me/{{ i.pharmacy.phone|default:''|cut:'+' }}" target="_blank"
                   class="btn btn-sm btn-success">
                  <i class="fa-brands fa-whatsapp"></i>
                </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="8" class="text-center text-muted">
              No pharmacies currently have this medicine.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-3">
    <a href="{% url 'search_medicine' %}" class="btn btn-secondary">
      <i class="fa-solid fa-chevron-left me-2"></i>Back to Search
    </a>
  </div>
</div>

{% endblock %}
